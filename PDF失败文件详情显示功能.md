# PDF失败文件详情显示功能

## 功能说明

针对用户反馈的需求，现在当PDF页面截图生成完成后，系统会显示失败文件的详细路径信息，格式为 `*.zip/*.pdf` 这种相对路径。**用户无需打开浏览器控制台，所有信息都会直接显示在界面上。**

## 改进内容

### 1. 失败文件信息记录
- 记录每个失败文件的详细信息：
  - ZIP文件名
  - PDF文件名  
  - 完整路径
  - 显示路径 (ZIP文件名/PDF文件名)
  - 失败原因

### 2. 多层次信息显示

#### 第一层：状态栏快速摘要
- 显示成功和失败的总数
- ≤5个失败文件：直接在状态栏显示所有详情
- >5个失败文件：显示前3个，提示总数

#### 第二层：确认对话框
- 处理完成后弹出确认对话框
- 显示成功/失败统计
- 询问用户是否查看详细信息

#### 第三层：详情模态窗口
- 美观的弹窗界面显示所有失败文件
- 包含完整的路径和失败原因
- 可滚动查看大量失败文件
- 提供使用提示

### 3. 用户友好的界面设计

#### 详情窗口特性
- **清晰的视觉层次**：成功/失败用不同颜色标识
- **完整信息展示**：ZIP文件名/PDF文件名、失败原因、完整路径
- **易于操作**：点击背景或按ESC键关闭，右上角关闭按钮
- **滚动支持**：支持查看大量失败文件
- **使用提示**：提供问题排查建议

## 使用流程

### 1. PDF处理完成
```
PDF页面截图生成完成：成功 140 个，失败 1 个

失败文件详情:
1. 202512110007-ZL1.zip/损坏文件.pdf (PDF文件为空 (0字节))
```

### 2. 确认对话框
```
PDF页面截图生成完成！

成功: 140 个
失败: 1 个

点击"确定"查看失败文件详情，点击"取消"关闭。
```

### 3. 详情模态窗口
```
┌─────────────────────────────────────────────────────────┐
│ PDF截图生成结果                                    [关闭] │
├─────────────────────────────────────────────────────────┤
│ ✓ 成功: 140 个 | ✗ 失败: 1 个                          │
│                                                         │
│ 失败文件详情:                                           │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 1. 202512110007-ZL1.zip/损坏文件.pdf               │ │
│ │    原因: PDF文件为空 (0字节)                        │ │
│ │    完整路径: /path/to/batch/zips/uuid/...          │ │
│ └─────────────────────────────────────────────────────┘ │
│                                                         │
│ 💡 提示: 失败的PDF文件可能是由于文件损坏、格式错误或    │
│    正在被其他程序使用。请检查这些文件并重新尝试。       │
└─────────────────────────────────────────────────────────┘
```

## 查看方式对比

| 方式 | 优点 | 缺点 | 适用场景 |
|------|------|------|----------|
| **状态栏显示** | 直接可见，无需操作 | 空间有限 | 少量失败文件 |
| **确认对话框** | 主动提醒，简洁明了 | 信息有限 | 快速了解结果 |
| **详情模态窗口** | 信息完整，界面美观 | 需要点击查看 | 详细问题排查 |
| ~~浏览器控制台~~ | ~~开发者友好~~ | ~~普通用户不会用~~ | ~~已废弃~~ |

## 技术实现

### 失败信息结构
```javascript
{
  zipName: "202512110007-ZL1.zip",
  pdfName: "损坏文件.pdf", 
  fullPath: "/完整/系统/路径",
  displayPath: "202512110007-ZL1.zip/损坏文件.pdf",
  reason: "具体失败原因"
}
```

### 显示逻辑
1. **收集阶段**：处理过程中收集失败文件信息
2. **状态栏显示**：根据失败数量选择显示方式
3. **确认对话框**：主动询问用户是否查看详情
4. **模态窗口**：美观地展示所有详细信息

## 用户价值

1. **无需技术知识**：普通用户无需了解浏览器控制台
2. **信息层次清晰**：从简单摘要到详细信息，满足不同需求
3. **快速定位问题**：通过 `ZIP文件名/PDF文件名` 格式快速找到问题文件
4. **了解失败原因**：具体的错误信息和解决建议
5. **界面友好**：美观的弹窗界面，易于阅读和操作

现在用户可以直接在程序界面中查看所有失败文件的详细信息，无需任何额外的技术操作！